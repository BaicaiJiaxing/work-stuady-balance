构造请求
查询：缴费
3：1
tps按照预期2s算
按照1小时稳定性测试，需准备数据1 * 60 * 60 * 2 = 2400请求报文
按照生产请求配比，需要准备查询1800、缴费800
预留buffer 共准备查询2500，缴费1500


150用户，并发执行


1.峰值稳定性测试
目标：150线程，持续15分钟，
假设预期tps 2s 1分钟 120*1.2
所需请求总数= 150x10x60=90000约等于 50000


查询：161758
缴费：161758 x 38/86= 71500 实际83204
​**​
### 准确的计算方法（考虑Ramp-Up）

更精确的计算需要考虑到用户数是线性增加的。这60秒内产生的请求数，相当于一个​**​三角形区域​**​的面积。

1. ​**​峰值保持阶段（600秒）的请求数​**​：
    
    这是最简单的部分。在600秒内，TPS稳定在124。
    
    `请求数_保持阶段 = 124 TPS × 600 s = 74,400`
    
2. ​**​线性拉升阶段（60秒）的请求数​**​：
    
    这60秒内的​**​平均TPS​**​是峰值TPS的一半。
    
    `平均TPS_拉升阶段 = 124 / 2 = 62`
    
    `请求数_拉升阶段 = 62 TPS × 60 s = 3,720`
    
3. ​**​总请求数​**​：
    
    `总请求数 = 请求数_拉升阶段 + 请求数_保持阶段`
    
    `总请求数 = 3,720 + 74,400 = 78,120`
![[Pasted image 20250924161908.png]]